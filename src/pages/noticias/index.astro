---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ContentCard from '../../components/ui/ContentCard.astro';
import FAQSection from '../../components/ui/FAQSection.astro';
import JsonLd from '../../components/seo/JsonLd.astro';
import { getPublishedContentSorted } from '../../utils/content-helpers';
import { newsCategories } from '../../config/content-types';

const noticias = await getPublishedContentSorted('noticias');

// FAQ data for AEO optimization
const faqData = [
  {
    question: '¿Dónde puedo encontrar noticias de K-Drama y K-Pop en español?',
    answer: 'OndaCoreana es tu fuente principal de noticias del entretenimiento coreano en español. Cubrimos estrenos de dramas, comebacks de grupos K-Pop, noticias de actores y todo el mundo Hallyu actualizado diariamente.',
  },
  {
    question: '¿Qué es Hallyu o la Ola Coreana?',
    answer: 'Hallyu (한류) significa "Ola Coreana" y se refiere al fenómeno global de popularidad de la cultura surcoreana. Incluye K-Pop, K-Dramas, cine coreano, moda, gastronomía y productos de belleza que han conquistado audiencias mundiales desde los años 2000.',
  },
  {
    question: '¿Cuándo se estrenan nuevos K-Dramas?',
    answer: 'Los K-Dramas se estrenan durante todo el año. Las principales cadenas coreanas (tvN, JTBC, SBS, KBS, MBC) lanzan nuevos dramas cada semana. Netflix y Disney+ también estrenan dramas coreanos originales regularmente. Publicamos todas las fechas de estreno.',
  },
  {
    question: '¿Cómo me entero de los comebacks de K-Pop?',
    answer: 'Las agencias anuncian comebacks con semanas de anticipación a través de sus redes sociales. En OndaCoreana cubrimos todos los anuncios importantes, teasers, fechas de lanzamiento y promociones de los grupos más populares.',
  },
  {
    question: '¿Qué premios importantes existen en el entretenimiento coreano?',
    answer: 'Los principales premios son: MAMA (música), Melon Music Awards, Golden Disc Awards, Baeksang Arts Awards (dramas y cine), Blue Dragon Film Awards, y Seoul Drama Awards. Cubrimos todas las ceremonias y ganadores.',
  },
  {
    question: '¿Los actores de K-Drama también cantan?',
    answer: 'Muchos actores coreanos son multitalentosos. Algunos empezaron como idols de K-Pop (como IU, D.O. de EXO, o Yoona de SNSD) y otros graban OST (bandas sonoras) para sus dramas. La industria coreana valora la versatilidad artística.',
  },
  {
    question: '¿Qué significa OST en K-Drama?',
    answer: 'OST significa "Original Sound Track" (banda sonora original). Los K-Dramas son famosos por sus OST emotivas, canciones originales creadas específicamente para la serie. Artistas populares graban estos temas que a menudo se vuelven hits.',
  },
  {
    question: '¿Cómo funcionan las temporadas de dramas en Corea?',
    answer: 'A diferencia de EE.UU., Corea no tiene "temporadas de TV" definidas. Los dramas se emiten durante todo el año, usualmente dos veces por semana. Las cadenas compiten por ratings con sus producciones simultáneas en diferentes horarios.',
  },
];
---

<BaseLayout
  title="Noticias de K-Drama, K-Pop y Cultura Coreana"
  description="Las últimas noticias del mundo del entretenimiento coreano. K-Dramas, K-Pop, cine coreano y más, todo en español."
>
  <Fragment slot="head">
    <JsonLd schema={{ type: 'FAQPage', questions: faqData }} />
  </Fragment>
  <section class="section-shell" style="--section-bg: linear-gradient(110deg, color-mix(in srgb, var(--md-color-primary) 75%, #0b0b0b) 0%, color-mix(in srgb, var(--md-color-tertiary) 60%, transparent) 100%); --section-color: var(--md-color-on-primary);">
    <div class="section-shell__inner">
      <h1 class="text-4xl font-bold" style="color: inherit;">Noticias</h1>
      <p style="color: color-mix(in srgb, var(--md-color-on-primary) 80%, transparent); max-width: 42rem;">
        Las últimas novedades del entretenimiento coreano: dramas, música, cine y cultura pop.
      </p>
    </div>
  </section>

  <section class="section-shell" style="--section-bg: var(--md-color-surface);">
    <div class="section-shell__inner">
      <!-- Category Filter -->
      <div class="flex flex-wrap gap-2">
        <a
          href="/noticias"
          class="chip"
          style="--chip-bg: var(--md-color-primary); --chip-color: var(--md-color-on-primary); text-transform: capitalize;"
        >
          Todas
        </a>
        {newsCategories.map((cat) => (
          <a
            href={`/noticias/categoria/${cat}`}
            class="chip"
            style="--chip-bg: color-mix(in srgb, var(--md-color-surface-variant) 80%, transparent); --chip-color: var(--md-color-on-surface); text-transform: capitalize;"
          >
            {cat}
          </a>
        ))}
      </div>

      {noticias.length > 0 ? (
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {noticias.map((noticia) => (
            <ContentCard
              href={`/noticias/${noticia.slug}`}
              title={noticia.data.title}
              description={noticia.data.description}
              heroImage={noticia.data.heroImage}
              heroImageAlt={noticia.data.heroImageAlt}
            >
              <Fragment slot="badges">
                <span class="chip" style="--chip-bg: color-mix(in srgb, var(--md-color-primary) 15%, transparent); --chip-color: var(--md-color-on-primary-container); text-transform: capitalize;">
                  {noticia.data.category}
                </span>
                {noticia.data.breaking && (
                  <span class="chip" style="--chip-bg: var(--md-color-error); --chip-color: var(--md-color-on-error);">
                    Urgente
                  </span>
                )}
              </Fragment>
              <Fragment slot="metadata">
                <time
                  datetime={noticia.data.pubDate.toISOString()}
                  style="font-size: var(--md-typo-label-medium-size); color: color-mix(in srgb, var(--md-color-on-surface-variant) 80%, transparent);"
                >
                  {noticia.data.pubDate.toLocaleDateString('es-419', { year: 'numeric', month: 'long', day: 'numeric' })}
                </time>
              </Fragment>
            </ContentCard>
          ))}
        </div>
      ) : (
        <p class="text-center subtle-text">Próximamente: noticias del mundo del entretenimiento coreano</p>
      )}
    </div>
  </section>

  <!-- Glossary Section for AEO -->
  <section class="section-shell" style="--section-bg: var(--md-color-surface-container);">
    <div class="section-shell__inner">
      <h2 class="text-2xl font-bold mb-6" style="color: var(--md-color-on-surface);">Glosario del Entretenimiento Coreano</h2>
      <dl class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3" style="color: var(--md-color-on-surface);">
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-primary);">Hallyu (한류)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">La "Ola Coreana": fenómeno global de popularidad de la cultura surcoreana incluyendo K-Pop, K-Dramas, cine, moda, belleza y gastronomía.</dd>
        </div>
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-primary);">Netizen (네티즌)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Usuario de internet coreano. Sus opiniones y comentarios en portales como Naver o Pann influyen significativamente en la industria del entretenimiento.</dd>
        </div>
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-primary);">Daesang (대상)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Gran Premio: el galardón más prestigioso en ceremonias de premios coreanas. Reconoce al mejor artista, álbum o drama del año.</dd>
        </div>
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-primary);">Sasaeng (사생)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Fan obsesivo que invade la privacidad de celebridades. Comportamiento rechazado por fandoms saludables y la industria del entretenimiento.</dd>
        </div>
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-primary);">Dispatch (디스패치)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Medio de noticias de entretenimiento famoso por revelar relaciones de celebridades. Tradicionalmente publica exclusivas el 1 de enero.</dd>
        </div>
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-primary);">All-kill (올킬)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Cuando una canción ocupa el #1 en todas las listas musicales coreanas simultáneamente. Indica éxito masivo y dominio total de los charts.</dd>
        </div>
      </dl>
    </div>
  </section>

  <!-- FAQ Section for AEO -->
  <section class="section-shell" style="--section-bg: var(--md-color-surface-container-low);">
    <div class="section-shell__inner">
      <FAQSection questions={faqData} />
    </div>
  </section>
</BaseLayout>
