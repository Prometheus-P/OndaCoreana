---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AdSlot from '../../components/ads/AdSlot.astro';
import ContentCard from '../../components/ui/ContentCard.astro';
import FAQSection from '../../components/ui/FAQSection.astro';
import JsonLd from '../../components/seo/JsonLd.astro';
import { getPublishedContentSorted } from '../../utils/content-helpers';

const artists = await getPublishedContentSorted('kpop');

// Insert ad after every N cards
const AD_INTERVAL = 4;

// FAQ data for AEO optimization
const faqData = [
  {
    question: '¿Qué significa K-Pop?',
    answer: 'K-Pop es la abreviatura de "Korean Pop" (Pop Coreano). Es un género musical originado en Corea del Sur que combina pop, hip-hop, R&B, EDM y música electrónica. Se caracteriza por grupos de idols con coreografías sincronizadas perfectamente, estéticas visuales elaboradas, conceptos temáticos por álbum, y una industria altamente profesionalizada con años de entrenamiento previo al debut.',
  },
  {
    question: '¿Cuáles son los grupos de K-Pop más famosos?',
    answer: 'Los grupos masculinos más famosos son: BTS (récord mundial de ventas), SEVENTEEN, Stray Kids, NCT, EXO, y TXT. Los grupos femeninos más populares son: BLACKPINK (grupo femenino más seguido), TWICE, aespa, IVE, NewJeans, y (G)I-DLE. Solistas destacados incluyen IU, JUNGKOOK, JENNIE, y TAEYEON. Estos artistas han logrado reconocimiento global y dominan las listas musicales internacionales.',
  },
  {
    question: '¿Qué es un idol de K-Pop?',
    answer: 'Un idol es un artista de entretenimiento coreano entrenado profesionalmente por una agencia durante 2-7 años antes de debutar. El entrenamiento incluye canto, baile, rap, actuación, idiomas y etiqueta pública. Los idols mantienen una imagen cuidada, participan en múltiples actividades (música, variedades, dramas), y cultivan una conexión cercana con sus fans a través de redes sociales, lives, y fan meetings regulares.',
  },
  {
    question: '¿Cómo se llaman los fans de K-Pop?',
    answer: 'Cada grupo tiene un nombre oficial para su fandom: ARMY (BTS), BLINK (BLACKPINK), ONCE (TWICE), EXO-L (EXO), STAY (Stray Kids), MY (aespa), CARAT (SEVENTEEN), MOA (TXT), ENGENE (ENHYPEN), ATINY (ATEEZ), y MIDZY (ITZY). Los fandoms son comunidades organizadas que apoyan a sus artistas mediante streaming, votaciones, proyectos de cumpleaños, y compra de álbumes. Cada fandom tiene su color oficial y lightstick.',
  },
  {
    question: '¿Qué es un comeback en K-Pop?',
    answer: 'Un comeback es el regreso de un artista o grupo con nueva música después de un período de inactividad (generalmente 4-8 meses). Incluye: nuevo álbum (mini álbum, álbum completo, o single), canción principal (title track), videoclip de alta producción, concepto visual nuevo, y 2-3 semanas de promociones en programas musicales. Los comebacks son eventos muy anticipados con teasers, fotos conceptuales, y contenido previo al lanzamiento.',
  },
  {
    question: '¿Dónde puedo escuchar K-Pop?',
    answer: 'Plataformas de streaming: Spotify, Apple Music, YouTube Music, Amazon Music, y Melon (plataforma coreana líder). Para videoclips: YouTube (canales oficiales como HYBE LABELS, SMTOWN, JYP Entertainment). Para contenido exclusivo: Weverse (HYBE), Bubble (mensajes directos), y V LIVE (lives y behind-the-scenes). Las plataformas coreanas (Melon, Genie, Bugs) son importantes para los charts coreanos.',
  },
  {
    question: '¿Qué agencias de K-Pop son las más importantes?',
    answer: 'Las "Big 4" agencias dominan la industria: HYBE (BTS, SEVENTEEN, TXT, ENHYPEN, NewJeans, LE SSERAFIM) es la más grande por capitalización. SM Entertainment (EXO, NCT, aespa, Red Velvet) es la pionera del K-Pop. JYP Entertainment (Stray Kids, TWICE, ITZY, NMIXX) es conocida por su training system. YG Entertainment (BLACKPINK, TREASURE, BABYMONSTER) tiene el estilo más hip-hop. Otras agencias importantes: Starship, Cube, Pledis, y ADOR.',
  },
  {
    question: '¿Cómo apoyar a mi grupo favorito de K-Pop?',
    answer: 'Formas de apoyar: hacer streaming en plataformas oficiales (cuenta para charts), comprar álbumes físicos (importante para ventas), votar en programas musicales (M Countdown, Music Bank, Inkigayo), participar en el fandom oficial de la agencia, comprar merchandise oficial, asistir a conciertos, y crear contenido positivo. Evita descargas ilegales y sitios de streaming no autorizados que perjudican a los artistas.',
  },
  {
    question: '¿Qué es un lightstick en K-Pop?',
    answer: 'Un lightstick (응원봉) es un bastón luminoso oficial de cada grupo usado en conciertos y eventos. Cada grupo tiene un diseño único que representa su identidad: el ARMY Bomb de BTS, el Hammer de BLACKPINK, el Candybong de TWICE. Los lightsticks se sincronizan por Bluetooth durante conciertos para crear "océanos de luz" coordinados. Son coleccionables importantes y símbolos de pertenencia al fandom.',
  },
  {
    question: '¿Qué son los programas musicales de K-Pop?',
    answer: 'Los programas musicales son shows semanales donde los grupos promocionan sus canciones y compiten por el primer lugar. Los principales son: M Countdown (Mnet, jueves), Music Bank (KBS, viernes), Show! Music Core (MBC, sábado), Inkigayo (SBS, domingo), Show Champion (MBC M, miércoles), y The Show (SBS MTV, martes). Ganar el #1 ("music show win") es un logro importante celebrado por fans.',
  },
  {
    question: '¿Qué significa "bias" en K-Pop?',
    answer: '"Bias" es tu miembro favorito de un grupo. "Bias wrecker" es otro miembro que amenaza con convertirse en tu favorito por su carisma o talento. "Ultimate bias" es tu favorito absoluto entre todos los idols. Tener un bias es parte fundamental de la cultura fan, aunque muchos tienen múltiples biases en diferentes grupos. Los fans expresan su bias a través de photocards, merchandise y votaciones.',
  },
  {
    question: '¿Qué es un trainee de K-Pop?',
    answer: 'Un trainee (연습생) es un aprendiz que entrena en una agencia de entretenimiento antes de debutar. El período de training dura de 2 a 7 años, aunque algunos debutan más rápido. El entrenamiento incluye: clases de canto, baile, rap, actuación, composición, idiomas (inglés, japonés, chino), y formación en imagen pública. Las agencias grandes como HYBE, SM, JYP y YG tienen sistemas de training muy competitivos con evaluaciones regulares.',
  },
  {
    question: '¿Qué son las photocards en K-Pop?',
    answer: 'Las photocards son pequeñas tarjetas coleccionables (tamaño tarjeta de crédito) incluidas aleatoriamente en álbumes físicos. Cada álbum incluye 1-2 photocards de miembros aleatorios, lo que incentiva comprar múltiples copias para coleccionar. Hay un activo mercado de intercambio y venta de photocards raras. Las "POBs" (Pre-Order Benefits) son photocards exclusivas de tiendas específicas, muy valoradas por coleccionistas.',
  },
  {
    question: '¿Cuál es la diferencia entre mini álbum y álbum completo?',
    answer: 'Un mini álbum (EP o Extended Play) tiene 4-7 canciones y es el formato más común en K-Pop, lanzado cada 4-6 meses. Un álbum completo (full album) tiene 10+ canciones y es menos frecuente, representando un proyecto más ambicioso. Un single álbum tiene 1-3 canciones. Los "repackage" son reediciones de álbumes con 2-3 canciones nuevas. Cada formato tiene diferentes versiones con fotos conceptuales distintas.',
  },
  {
    question: '¿Cómo funcionan los charts de K-Pop?',
    answer: 'Los charts principales son: Melon, Genie, Bugs, y FLO (streaming coreano), Billboard Hot 100 y Billboard 200 (global), Oricon (Japón), y Hanteo/Circle Chart (ventas de álbumes en Corea). Un "all-kill" ocurre cuando una canción es #1 en todos los charts simultáneamente. Los "digital points" combinan streaming, descargas, y emisiones de radio. Las ventas de primera semana ("first week sales") son métricas importantes para medir el éxito de un comeback.',
  },
];
---

<BaseLayout
  title="K-Pop - Artistas, Grupos y Noticias"
  description="Todo sobre K-Pop en español: perfiles de artistas, grupos, comebacks, noticias y más. Tu guía completa del mundo del K-Pop."
>
  <Fragment slot="head">
    <JsonLd schema={{ type: 'FAQPage', questions: faqData }} />
  </Fragment>
  <section class="section-shell" style="--section-bg: linear-gradient(140deg, color-mix(in srgb, var(--md-color-tertiary) 90%, #0d0d0d) 0%, color-mix(in srgb, var(--md-color-primary) 70%, transparent) 100%); --section-color: var(--md-color-on-primary);">
    <div class="section-shell__inner">
      <h1 class="text-4xl font-bold" style="color: inherit;">K-Pop</h1>
      <p style="color: color-mix(in srgb, var(--md-color-on-primary) 80%, transparent); max-width: 40rem;">
        Artistas, grupos, comebacks y movimientos de la industria musical coreana.
      </p>
    </div>
  </section>

  <!-- Ad: Top of listing -->
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <AdSlot slot="kpop-top" format="banner" testId="ad-kpop-top" />
  </div>

  <section class="section-shell" style="--section-bg: var(--md-color-surface);">
    <div class="section-shell__inner">
      {artists.length > 0 ? (
        <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
          {artists.map((artist, index) => (
            <>
              <ContentCard
                href={`/kpop/${artist.slug}`}
                title={artist.data.artistName}
                heroImage={artist.data.heroImage}
                heroImageAlt={artist.data.heroImageAlt}
                variant="kpop-artist"
              >
                <Fragment slot="subtitle">
                  {artist.data.agency && (
                    <p class="subtle-text">{artist.data.agency}</p>
                  )}
                </Fragment>
                <Fragment slot="badges">
                  <span class="chip" style="--chip-bg: color-mix(in srgb, var(--md-color-tertiary) 15%, transparent); --chip-color: var(--md-color-on-tertiary-container);">
                    {artist.data.artistType}
                  </span>
                </Fragment>
              </ContentCard>
              {/* Insert in-feed ad after every AD_INTERVAL cards */}
              {(index + 1) % AD_INTERVAL === 0 && index < artists.length - 1 && (
                <div class="sm:col-span-2 lg:col-span-3 xl:col-span-4">
                  <AdSlot slot={`kpop-feed-${Math.floor(index / AD_INTERVAL)}`} format="in-feed" testId={`ad-kpop-feed-${index}`} />
                </div>
              )}
            </>
          ))}
        </div>
      ) : (
        <p class="text-center subtle-text">Próximamente: perfiles de artistas y grupos K-Pop</p>
      )}
    </div>
  </section>

  <!-- Ad: Bottom of listing -->
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-8">
    <AdSlot slot="kpop-bottom" format="auto" testId="ad-kpop-bottom" />
  </div>

  <!-- Glossary Section for AEO -->
  <section class="section-shell" style="--section-bg: var(--md-color-surface-container);">
    <div class="section-shell__inner">
      <h2 class="text-2xl font-bold mb-6" style="color: var(--md-color-on-surface);">Glosario de Términos de K-Pop</h2>
      <dl class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3" style="color: var(--md-color-on-surface);">
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-tertiary);">Idol (아이돌)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Artista de K-Pop entrenado profesionalmente por una agencia. Domina canto, baile, rap y actuación. Mantiene una imagen pública cuidada y conexión cercana con fans.</dd>
        </div>
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-tertiary);">Comeback (컴백)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Regreso de un artista con nuevo álbum y promociones. Incluye concepto visual, videoclip, coreografía y presentaciones en programas musicales.</dd>
        </div>
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-tertiary);">Bias (최애)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Miembro favorito de un grupo. "Bias wrecker" es otro miembro que amenaza con convertirse en tu nuevo favorito por su carisma.</dd>
        </div>
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-tertiary);">Fandom (팬덤)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Comunidad organizada de fans con nombre oficial. Ejemplos: ARMY (BTS), BLINK (BLACKPINK), ONCE (TWICE). Apoyan con streaming, votaciones y proyectos.</dd>
        </div>
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-tertiary);">Lightstick (응원봉)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Bastón luminoso oficial de cada grupo usado en conciertos. Diseño único que identifica al fandom y se sincroniza con la música durante shows.</dd>
        </div>
        <div class="p-4 rounded-lg" style="background: var(--md-color-surface-container-high);">
          <dt class="font-semibold text-lg" style="color: var(--md-color-tertiary);">Trainee (연습생)</dt>
          <dd class="mt-1 text-sm" style="color: var(--md-color-on-surface-variant);">Aprendiz que entrena en una agencia antes de debutar. El período puede durar de 2 a 7 años, practicando canto, baile, idiomas y habilidades de entretenimiento.</dd>
        </div>
      </dl>
    </div>
  </section>

  <!-- FAQ Section for AEO -->
  <section class="section-shell" style="--section-bg: var(--md-color-surface-container-low);">
    <div class="section-shell__inner">
      <FAQSection questions={faqData} />
    </div>
  </section>
</BaseLayout>
